<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="com.supermm.mapper.MemberMapper">
  	
  	<!-- 회원목록 -->
  	<select id="getMemList" resultType="com.supermm.model.MemberVO">
  		select * from member order by mnum
  	</select>
  	
  	<!-- 회원목록(페이징) -->
  	<select id="getMemListPaging" resultType="com.supermm.model.MemberVO">
  		<![CDATA[
        select mnum, id, pw, name, birth, gender, email, phone, zipcode, addr1, addr2, addr3, mpoint, regdate from(
                select /*+INDEX_DESC(member mnum) */ rownum  as mnum, id, pw, name, birth, gender, email, phone, zipcode, addr1, addr2, addr3, mpoint, regdate
                from member where rownum <= #{pageNum} * #{amount}) 
        where mnum > (#{pageNum} -1) * #{amount}
	    ]]>
  	</select>
  	
  	<!-- 회원 총 인원 -->
  	<select id="getMemTotal" resultType="int">
  		select count(*) from member
  	</select>
  	
  	<!-- 회원정보 조회 -->
  	<select id="getMemInfo" resultType="com.supermm.model.MemberVO">
  		select * from member where mnum = #{mnum}
  	</select>
  	
  	<!-- 회원포인트 조회 -->
  	<select id="getMemPoint" resultType="com.supermm.model.MemberVO">
  		select id,name,mpoint from member where mnum = #{mnum}
  	</select>
  	
  	<!-- 회원포인트 수정 -->
  	<update id="updateMemPoint" >
  		update member set mpoint = #{mpoint} where mnum = #{mnum}
  	</update>
  	
  </mapper>